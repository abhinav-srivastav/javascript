<html>
  <head>
    <script type = "text/javascript">
      var row_no = 0;

      function add_row()
      {
         var tbody = document.getElementById("tbody");
         var trow = document.createElement("tr");
         tbody.appendChild(trow);
         trow.insertCell(0);

         var tdata1 = document.createElement("td");
         var cell_value = document.createElement("input");
         cell_value.setAttribute("type","textbox");
         cell_value.setAttribute("id","user"+trow.rowIndex);
         cell_value.setAttribute("size","30%");

         tdata1.appendChild(cell_value);
         trow.cells[0].appendChild(tdata1);

         trow.insertCell(1);
         var tdata2 = document.createElement("td");
         var cell_value2 = document.createElement("input");
         cell_value2.setAttribute("type","textbox");
         cell_value2.setAttribute("id","email"+trow.rowIndex);
         cell_value2.setAttribute("size","30%");

         tdata2.appendChild(cell_value2);
         trow.cells[1].appendChild(tdata2);

         trow.insertCell(2);
         var tdata3 = document.createElement("td");
         var cell_value3 = document.createElement("input");
         cell_value3.setAttribute("type","button");
         cell_value3.setAttribute("value","save");
         cell_value3.setAttribute("onclick","append_row("+trow.rowIndex+")");
         cell_value3.setAttribute("size","10%");

         tdata3.appendChild(cell_value3);
         trow.cells[2].appendChild(tdata3);
         tbody.appendChild(trow);
         document.getElementById("table_add").appendChild(tbody); row_no++;
      }

      function append_row(row_ind)
      {
       var row_app = document.getElementById("email"+row_ind).parentNode.parentNode.parentNode.rowIndex;
              console.log(row_app);var user_value = document.getElementById("user"+row_ind).value;
       var email_value = document.getElementById("email"+row_ind).value;
       var tbody = document.getElementById("tbody");  
      
       document.getElementById("tbody").deleteRow(row_app);
       tbody.insertRow(row_app);
       tbody.rows[row_app].id= row_app;
       tbody.rows[row_app].insertCell(0);
       tbody.rows[row_app].cells[0].appendChild(document.createTextNode(user_value));

       tbody.rows[row_app].insertCell(1);
       tbody.rows[row_app].cells[1].appendChild(document.createTextNode(email_value));

       tbody.rows[row_app].insertCell(2);
       var cell_value = document.createElement("a");  
       cell_value.setAttribute("href","#");
       cell_value.setAttribute("onclick","app("+tbody.rows[row_app].id+")");
       cell_value.appendChild(document.createTextNode("edit/"));
    
       var cell_value1 = document.createElement("a");  
       cell_value1.setAttribute("href","#");
       cell_value1.setAttribute("onclick","del("+tbody.rows[row_app].id+")");
       cell_value1.appendChild(document.createTextNode("del"));
       tbody.rows[row_app].cells[2].appendChild(cell_value);
       tbody.rows[row_app].cells[2].appendChild(cell_value1);


       document.getElementById("table_add").appendChild(tbody);
      }

      function del(row_id)
      {
        var row_del = document.getElementById(row_id).rowIndex;
        var tbody = document.getElementById("tbody");  
        tbody.deleteRow(row_del);
        document.getElementById("table_add").appendChild(tbody);
      } 

      function app(row_id)
     {
        var tbody = document.getElementById("tbody");
        
        var prev_row = document.getElementById(row_id);
    

        var current_row = prev_row.rowIndex;

console.log(current_row);
tbody.deleteRow(prev_row.rowIndex);
        tbody.insertRow(current_row);

        var user_value = prev_row.cells[0].childNodes[0].textContent;

        var email_value = prev_row.cells[1].childNodes[0].textContent;

        tbody.rows[current_row].insertCell(0);
        var tdata1 = document.createElement("td");
        var cell_value = document.createElement("input");
        cell_value.setAttribute("type","textbox");
        cell_value.setAttribute("id","user"+prev_row.rowIndex);
        cell_value.setAttribute("size","30%");
        cell_value.setAttribute("value",user_value);

        tdata1.appendChild(cell_value);
        tbody.rows[current_row].cells[0].appendChild(tdata1);

        tbody.rows[current_row].insertCell(1);
        var tdata2 = document.createElement("td");
        var cell_value2 = document.createElement("input");
        cell_value2.setAttribute("type","textbox");
        cell_value2.setAttribute("id","email"+prev_row.rowIndex);
        cell_value2.setAttribute("size","30%");
        cell_value2.setAttribute("value",email_value);
        tdata2.appendChild(cell_value2);
        tbody.rows[current_row].cells[1].appendChild(tdata2);

        tbody.rows[current_row].insertCell(2);
        var tdata3 = document.createElement("td");
        var cell_value3 = document.createElement("input");
        cell_value3.setAttribute("type","button");
        cell_value3.setAttribute("value","save");
        cell_value3.setAttribute("onclick","append_row("+prev_row.rowIndex+")");
        cell_value3.setAttribute("size","10%");

        tdata3.appendChild(cell_value3);
        tbody.rows[current_row].cells[2].appendChild(tdata3);



        //document.getElementById("table_add").appendChild(tbody);
     }

    </script>
  </head>

  <body>
    <table id = "table_add" border=1px cellspacing=0px width=70%>
      <tbody id = "tbody">      
        <tr>
          <td>User</td>
          <td>Email</td>
          <td>Action</td>
        </tr>
      </tbody>
    </table>

    <button type="button" onClick="add_row()">Add New Row</button>

  </body>
</html>